















































# Shadow Analysis - Wild Animals Plugin

## Issues

1. Why do a shadow analysis?

2. What does the plugin do?

3. Mesh vs Polysurface

### Why do a shadow analysis?

sdgasfdgadfhadgh


### What does the plugin do?

![Missing Image](images/GhostComponent.png)

The plugin takes 5 inputs, and has 1 output (the 'out' output is temporary and currently used for development). Here's an explanation of how to use them and what they do:

#### Inputs:

 - **Geoms.**
 
   Short for geometry, the geoms input takes the buildings and structures that are going to be analysed for their shadow's impact. These can either meshes or polysurfaces, although it is worth considering which to use, [as is discussed here](#meshpoly).

 - **Context.**
 
   The context input takes the terrain that the buildings are on (and that the shadows will be projected on to). This can also either be a mesh or a polysurface.


 - **sunVec.**
 
   Short for Sun Vector(s), these represent the direction that the sun's light shines given its position. These are generated by the *sunPath* ladybug component - go to the [ladybug section in the standard workflow part of this document](#ladybug) to see how to do this.


 - **sunPos.**
 
   Short for Sun Position(s), these represent the position that the sun is in at each time of the day to be calculated. These are also generated by the *sunPath* ladybug component.


 - **A/I.**
 
   Short for ?? , this controls whether the shadows produced are seperated per building or not. This can be controlled by connecting a boolean toggle, where *True* means that the building's shadows are connected, and *False* means that each building is seperate.

#### Outputs:
 
 - **Shadow.**
 
   These are the shadows generated by the building(s) entered on the given terrain in the form of polyline curve(s). They follow the terrain, so unless the terrain is completely flat, these won't be planar.


### <a name="meshpoly">Mesh vs Polysurface</a>

Mesh = easier for the computer; polysurface = easier for the user





## Standard Workflow

1. **File preparation**

2. **File Downloads**

3. **Ladybug Setup**

4. **GHOST Component**

Necessary plugins: Wild Animals, Ladybug


### File Preparation

1. Use **File > Worksession > Attach** to attach the building files that will be analysed for their shadow's impact. Do the same thing for the terrain files.

2. Create new layers for the building(s) and the terrain respectively, copying the models over into these layers.

3. Ensure that your models are meshes. [Here is some discussion as to whether meshes or polysurfaces are more appropriate](#meshpoly)

3. Use MeshSlice on the buildings, using the terrain as the cutting object. This ensures that there aren't any 'negative' shadows generated by sections of the buildings underneath the ground.

4. Delete the sections of the buildings that are underneath the ground after having sliced them.

5. Use ReduceMesh on the remaining parts of the buildings. **What settings to use???**


### File Downloads

1. To get the relevant EPW (**E**nergy**P**lus **W**eather) files that ladybug requires, we'll need to visit [this website](http://www.ladybug.tools/epwmap/).

![Missing Image](images/LadybugMap.png)

2. After navigating to the relevant location, right click on the nearest circle. This will bring up a pop up with a url, copy it to the clipboard as it tells you to.

![Missing Image](images/ladybugpopup.png)

3. Go to the URL and download the zip folder. This contains the EPW file that ladybug will need.

4. Unzip the folder to access the files.


### <a name="ladybug">Ladybug Setup</a> 

1. In order to determine the shadows, we'll need data on the sun and it's location, which will be provided by ladybug. Assuming that you already have Ladybug installed (link to the install is [here](http://www.food4rhino.com/app/ladybug-tools)), open up the grasshopper file that you'll be using.

2. Create the *Ladybug_Ladybug* component. This component doesn't need to be connected to anything, but just initialises some classes that other components need to run.

![Missing Image](images/ladybug_ladybug.png)

3. Create the *open weather file* component, and attach a boolean toggle to it.

![Missing Image](images/openEPW.png)

4. Double click the boolean toggle - this should open up a window that will let you pick a file. Select the EPW file we downloaded earlier.

![Missing Image](images/fileExplorer.png)

5. Create the *importEPW* component, and connect it to the ouput of *open weather file*. This component just extrapolates all the data from the EPW file and provides a series of outputs for use with other ladybug components.

![Missing Image](images/importEPW.png)

6. Create the *sunPath* component, connecting the 'location' output of the *importEPW* component to *sunPath*'s '\_location' output. The sunPath component generates a lot of different data about the sun, some of which will be used with the GHOST component to do the shadow analysis.

![Missing Image](images/sunPath.png)

7. The default time that ladyBug chooses is midday on the 21st of December. However, these can be changed quite easily by modifying the '\_hour_', '\_day_' and '\_month_' inputs to their respective integers. The '\_timestep_' input determines how many shadows are calculated per hour, and should be a factor of 60.

![Missing Image](images/sunPathTime.png)

8. To analyse a longer period of time than one hour, you can use the *analysisPeriod* component. Connect the 'analysisPeriod' output on the component to the 'analysisPeriod_' input on the sunPath component to use it.

   *Note: This will override any other above inputs that are used to control the time.
   
![Upload this image!!!](images/analysisPeriod_connection.png)

# *Some issues with getting sunPath to work, something about needing more than 1 value to unpack.

9. 

![Missing Image](images/analysisPeriod.png)

### GHOST Component

1. Open up grasshopper, importing the buildings and the terrain.









































































